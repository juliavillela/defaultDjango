{% extends 'base/layout.html' %}

{% block body %}

<div class="container mt-4">
    <h1>The api app</h1>
    <p> this is a template api using django rest framework. </p>
    <p class="text-muted long-text">the purpose of this template is to demonstrate all the modifications needed on the main project to run rest framework + some more complex models and how to handle them</p>
    
    <section id='models' class='row p-3 gap-3 mb-5'>
        <h1 class="text-center">Api db model and serialization</h1>
        <hr>
        <div class='row'>
            <div class="col-lg-6 col-md-6 col-sm-12 p-2">
                <div class="card border-0 shadow">
                    <div class="card-header">
                        <div class="card-title h5">The dummy model</div>
                        <div class="card-subtitle text-muted">the template db model used in this api</div>
                    </div>
                    <div class="card-body"> 
                        <p class="card-text">Dummy class</p>
                        <p class="text-muted long-text">this model holds an mark down text file, along side time stamps, author info and public permissions</p>

                        <p><b>attributes:</b></p>
                        <ul>
                            <li>created_at: auto date-time field</li>
                            <li>last_edited: auto date-time field</li>
                            <li>user: foreing key field User</li>
                            <li>public: bool field defaults to false</li>
                            <li>title: char field max len 220</li>
                            <li>subtitle: optional char field max len 800</li>
                            <li>md_file: file field uploaded to media/user_{id}/{filename}</li>
                        </ul>

                        <p><b>methods:</b></p>
                    </div>
                    <div class="card-footer"><button class='btn btn-light'>see api view</button></div>
                </div>
            </div>

            <div class="col-lg-6 col-md-6 col-sm-12 p-2">
                <div class="card border-0 shadow mb-2">
                    <div class="card-header">
                        <div class="card-title h5">Serializers</div>
                    </div>
                    <div class="card-body"> 
                        <p class="card-text"><b>paritial serializer:</b> returns only metadata on the Dummy, not the actual file content. [used in list view]</p>
                        <p class="card-text"><b>full serializer:</b> returns full data for a Dummy, including mark down converted to html. [used in detail view]</p>
                        <p class="card-text"><b>user serializer:</b>a simple serializer which returns id and username for user field in Dummy.[used by dummy serializers]</p>

                    </div>
                </div>

                <div class="card border-0 shadow">
                    <div class="card-header">
                        <div class="card-title h5">Viewsets</div>
                        </div>
                    <div class="card-body"> 
                        <p class="card-text"><b>default crud veiwSet:</b> modified only to return a simpler version of dummy in list view. Atm it ignores public restriction</p>                    
                    </div>
                    <div class="card-footer text-muted">to enter api view type "dummy/" or "dummy/{id}/ after the current path</div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <h1 class="text-center">adding rest framework to project </h1>
            <hr>
            <div class="row">
            <div class="col-lg-3 col-md-4 col-sm-12 p-2">
                <div class="card border-0 shadow">
                    <div class="card-header">
                        <div class="card-title h5">Adding rest framework to project</div>
                        <div class="card-subtitle text-muted">the changes applied and how to undo them</div>
                    </div>
                    <div class="card-body"> 
                        <p class="card-text"> adding rest framework to project edits the following generic files:</p>
                        <ul>
                            <li>requirements.txt: which must include all rest fmw requirements</li>
                            <li>settings.py: #TBD</li>
                            <li>on top of all the regular changes creating a new app requires: urls.py, INSTALLED_APPS etc.</li>
                        </ul>
                    </div>
                    <div class="card-footer"><button class='btn btn-light'>see api view</button></div>
                </div>
            </div>


            <div class="col-lg-3 col-md-4 col-sm-12 p-2">
                <div class="card border-0 shadow">
                    <div class="card-header">
                        <div class="card-title h5">Handling media and files</div>
                        <div class="card-subtitle text-muted">the changes applied and how to undo them</div>
                    </div>
                    <div class="card-body"> 
                        <p class="card-text"> adding rest framework to project edits the following generic files:</p>
                        <ul>
                            <li>requirements.txt: which must include all rest fmw requirements</li>
                            <li>settings.py: #TBD</li>
                            <li>on top of all the regular changes creating a new app requires: urls.py, INSTALLED_APPS etc.</li>
                        </ul>
                    </div>
                    <div class="card-footer"><button class='btn btn-light'>see api view</button></div>
                </div>
            </div>

            <div class="col-lg-3 col-md-4 col-sm-12 p-2">
                <div class="card border-0 shadow">
                    <div class="card-header">
                        <div class="card-title h5">Js fetch requests</div>
                        <div class="card-subtitle text-muted">In order to actually use the api structure, fetch methods are added to js components</div>
                    </div>
                    <div class="card-body"> 
                        <p class="card-text">inside js/components there is a new dir called display_api/ which holds all the methods related to handling the api. these are independent and can be deleted if the api is not in use.</p>
                    </div>
                    <div class="card-footer"><button class='btn btn-light'>see api view</button></div>
                </div>
            </div>

        </div>
    </section>

</div>

{% endblock %}